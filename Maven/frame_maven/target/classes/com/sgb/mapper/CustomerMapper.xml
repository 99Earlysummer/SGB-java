<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sgb.mapper.CustomerMapper">

    <resultMap id="customerMap" type="customer">
        <id property="customerId" column="customer_id" javaType="int"></id>
        <result property="address" column="address" javaType="String"></result>
        <result property="customerName" column="customer_name" javaType="String"></result>
        <collection property="orderList" ofType="order">
            <id property="orderId" column="order_id" javaType="int"></id>
            <result property="orderState" column="order_state" javaType="String"></result>
        </collection>
    </resultMap>
<select id="selectCustomerAndCustomerByOrderId" parameterMap="customerMap">
    select *
    from tb_customer
left outer join tb_order on tb_customer.customer_id=tb_order.customer_no
where tb_customer.customer_id=#{customerId}
</select>

    <!--①③第二次单表查询-->
    <select id="selectCustomerByCustomerId" resultType="customer">
        select *
        from tb_customer
where customer_id=#{customerId}
    </select>



    <resultMap id="customerMap2" type="customer">
        <id property="customerId" column="user_id" javaType="int"></id>
        <result property="customerName" column="customer_name" javaType="String"></result>
        <result property="address" column="address" javaType="String"></result>
        <collection property="orderList"
                    ofType="order"
                    select="com.sgb.mapper.OrderMapper.selectOrderListByCustomerId"
                    column="customer_id"
                    fetchType="lazy"/>
    </resultMap>
    <select id="selectCustomerByCustomerName" resultMap="customerMap2">
        select *
        from tb_customer
where customer_name =#{customerName};
    </select>




</mapper>
